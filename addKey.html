<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <script href="ps.js"></script>
</head>
<body>

<div class="container mt-3">
  <h2>Registro de usuario</h2>
  <form class="was-validated" onsubmit="return validar(this);">
    <div class="mb-3 mt-3">
  	
    <div class="mb-3">
      <label for="Reg">Registro IBFed:</label>
      <input type="text" class="form-control" name="reg" placeholder="Ingrese el registro" name="reg" required>
    <div class="valid-feedback">Valido</div>
    <div class="invalid-feedback">Por favor, escriba el registro IBFed</div>
    </div>
    <div class="mb-3">
      <label for="nombre">Nombre:</label>
      <input type="text" class="form-control" name="nombre" placeholder="Ingrese el nombre" name="reg" readonly>
    </div>
    <div class="mb-3">
      <label for="email">Correo:</label>
      <input type="email" class="form-control" name="email" placeholder="Ingrese el correo" name="email" required>
    <div class="valid-feedback">Valido</div>
    <div class="invalid-feedback">Por favor, escriba el correo</div>
    </div>
    <div class="mb-3">
      <label for="pwd">Contraseña:</label>
      <input type="password" class="form-control" name="pwd" placeholder="Ingrese la contraseña" name="pswd" required>
    <div class="valid-feedback">Valido</div>
    <div class="invalid-feedback">Por favor, escriba la contraseña</div>
    </div>
    <div class="mb-3">
      <label for="pwdr">Confirma contraseña:</label>
      <input type="password" class="form-control" name="pwdr" placeholder="Confirme la contraseña" name="pswd" required>
    <div class="valid-feedback">Valido</div>
    <div class="invalid-feedback">Por favor, confirme la contraseña</div>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>

</body>
</html>
<script>
async function sha256(message) {
const msgBuffer = new TextEncoder().encode(message); // Codifica la cadena a utf-8
const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer); // Genera el hash SHA-256 del buffer de mensajes

const hashArray = Array.from(new Uint8Array(hashBuffer)); // Convierte el hash buffer en un array de bytes
const hashHex = hashArray
.map((b) => b.toString(16).padStart(2, "0"))
.join(""); // Convierte el array de bytes en una cadena hexadecimal return hashHex;
return hashHex;
}
validar = function (oForm)	{
	let reg = oForm['reg'].value;
    let pos = 0;
    ps.forEach(function(v, i) {
    	if (v.r === reg) pos = i;
    });
    if (pos > 0)	oForm["nombre"].value = ps[pos].n;
    alert('listo');
    return false;
}
</script>
